---
layout: post
title:  触摸相关
date:   2015-07-21-17:19:56
categories: jekyll update
---

1. 普通的 tap, 如何控制有效点击区域?

    UITapGestureRecognizer* gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(pickerViewTapGestureRecognized:)];
    gestureRecognizer.cancelsTouchesInView = NO; //轮流调用touches 以及 gesture 方法
    gestureRecognizer.delegate = self; //同时识别多个手势
    [_pickerView addGestureRecognizer:gestureRecognizer];


    case UIGestureRecognizerStateEnded:{

        CGPoint touchPoint = [gestureRecognizer locationInView:gestureRecognizer.view.superview]; //获取触点
        
        CGRect frame = self.pickerView.frame;
        CGRect selectorFrame = CGRectInset( frame, 0.0, self.pickerView.bounds.size.height * 0.85 / 2.0 ); //截取有效区域
        
        if( CGRectContainsPoint( selectorFrame, touchPoint) ){ //如果点击区域在有效区域里
            //调用对应逻辑
        }
    }

    //同时识别多个手势
    -(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    if (otherGestureRecognizer.state == UIGestureRecognizerStateEnded) {
        return true;
    }
    return false;
	}

2. touches , 如何识别一个UIView 上的一个手指 两个手指 左右手指触摸事件?

	- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    	[super touchesBegan:touches withEvent:event];
	    
	    if (event.allTouches.count == 2) { //双指按下
	        
	    } else if(event.allTouches.count == 1){ //单指按下
	        
	    }
	    
	}

	- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
	    [super touchesMoved:touches withEvent:event];
	
	    if (event.allTouches.count == 2) { //双指移动
	        
	    } else if (event.allTouches.count == 1) { //单指移动
	        
	        CGFloat positionX = [[touches anyObject] locationInView:self].x;

	    }
	}

	- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
	    [super touchesEnded:touches withEvent:event];
	    
	    if (event.allTouches.count == 2) { //两个手指抬起其中一个
	        if (touches.count == 1) { 

	            //判断到底是左手还是右手抬起
	            [_indexes removeAllObjects];
	            for (UITouch* touch in event.allTouches) {
	                [_indexes addObject:touch];
	            }
	            CGFloat leftValue = [_indexes[0] locationInView:self].x;
	            CGFloat rightValue = [_indexes[1] locationInView:self].x;
	            _leftValue = leftValue < rightValue ? leftValue : rightValue;
	            _rightValue = rightValue > leftValue ? rightValue : leftValue;
	            
	            CGFloat value = [[touches anyObject] locationInView:self].x;
	            if (value == _leftValue) { //抬起左手指
	                
	                
	            } else { //抬起右手指
	                
	            }
	            
	        } else { //两个手指一起抬起
	            
	        }
	        
	    } else if (event.allTouches.count == 1) { //单独一个手指抬起
	        
	    }
	    
	}


[jekyll]:      http://jekyllrb.com
[jekyll-gh]:   https://github.com/jekyll/jekyll
[jekyll-help]: https://github.com/jekyll/jekyll-help
